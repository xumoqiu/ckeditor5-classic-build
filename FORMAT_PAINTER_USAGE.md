# CKEditor 5 格式刷功能使用指南

## ✅ 已成功实现

我已经为您的 CKEditor 5 (v20.0.0) 项目成功实现了自定义格式刷插件！

## 📦 已添加的文件

```
src/format-painter/
├── src/
│   ├── format-painter.js           # 主插件
│   ├── format-painter-editing.js   # 编辑功能
│   ├── format-painter-ui.js        # 用户界面
│   └── format-painter-command.js   # 命令逻辑
├── theme/
│   └── format-painter.css          # 样式
├── icons/
│   └── format-painter.svg          # 格式刷图标
└── README.md                       # 插件说明
```

## 🎨 支持的格式

格式刷可以复制和应用以下格式：

| 格式类型 | 说明 |
|---------|------|
| ✔️ 粗体 | Bold |
| ✔️ 斜体 | Italic |
| ✔️ 下划线 | Underline |
| ✔️ 代码 | Code |
| ✔️ 字体系列 | Font Family (如：Arial, Times New Roman) |
| ✔️ 字体大小 | Font Size (如：12px, 14px, 16px) |
| ✔️ 字体颜色 | Font Color |
| ✔️ 背景颜色 | Font Background Color |
| ✔️ 高亮 | Highlight |

## 🚀 使用方法

### 步骤 1: 选择源文本
选中包含您想要复制格式的文本（例如：红色、粗体、大字号的文字）

### 步骤 2: 激活格式刷
点击工具栏中的 **格式刷按钮**（刷子图标）
- 按钮会变为激活状态（高亮显示）
- 控制台会显示已复制的格式（如果打开了开发者工具）

### 步骤 3: 选择目标文本
用鼠标拖拽选中您想要应用格式的目标文本

### 步骤 4: 松开鼠标
- 格式会立即应用到目标文本
- 格式刷自动关闭
- 控制台会显示"格式已应用"

### 取消操作
如果想取消格式刷：
- 按 **ESC 键**
- 或再次点击格式刷按钮

## 🔍 调试模式

当前版本包含调试日志，会在浏览器控制台显示：
1. `格式刷：按钮被点击，开始复制格式`
2. `格式刷：已复制格式 [...]`
3. `格式刷：正在应用格式到选区 [...]`
4. `格式刷：格式已应用`

**打开控制台**: 按 F12 → 选择 "Console" 标签

这些日志帮助您了解格式刷的工作状态。在生产环境中可以移除这些日志。

## 💡 使用示例

### 示例 1: 统一标题格式

1. 选中一个已经格式化好的标题（例如：红色、粗体、20px）
2. 点击格式刷按钮
3. 依次选中其他标题文本
4. 所有标题将具有相同的格式

### 示例 2: 复制强调文本格式

1. 选中一段重点文本（黄色高亮 + 粗体）
2. 点击格式刷
3. 选中需要同样强调的文本
4. 格式立即应用

## 🎯 工具栏位置

格式刷按钮位于工具栏中，在以下按钮之后：
```
标题 | 粗体 | 斜体 | 字体大小 | 字体系列 | 字体颜色 | 背景色 | 清除格式 | [格式刷] | 分隔符 | ...
```

## 🔧 构建说明

项目已成功构建，构建输出：
- **文件大小**: 815 KB
- **位置**: `build/ckeditor.js`
- **Source Map**: `build/ckeditor.js.map`

## 📖 测试方法

1. 打开 `sample/index.html` 文件
2. 在编辑器中输入一些测试文本
3. 为某段文字设置格式（颜色、大小、粗体等）
4. 选中该文字，点击格式刷按钮
5. 选中另一段文字，查看格式是否成功应用

## ⚠️ 注意事项

1. **必须有选区**: 只有在选中文本时才能激活格式刷
2. **覆盖现有格式**: 格式刷会清除目标文本的原有格式并应用新格式
3. **单次应用**: 每次应用后格式刷会自动关闭，如需再次使用需要重新激活
4. **仅文本格式**: 当前版本不支持段落级别的格式（如对齐方式、列表格式等）

## 🔄 与其他功能的对比

| 功能 | 作用 | 使用场景 |
|-----|------|---------|
| **格式刷** | 复制并应用格式 | 需要多处使用相同格式时 |
| **清除格式** | 移除所有格式 | 需要恢复纯文本时 |

## 🐛 故障排除

### 问题：格式刷按钮不显示
**解决方案**: 确保已重新构建项目 (`npm run build`)

### 问题：格式没有正确应用
**解决方案**:
1. 检查源文本是否真的包含格式
2. 确保选中的是文本内容而不是空节点

### 问题：格式刷无法取消
**解决方案**: 按 ESC 键或点击其他编辑器区域

## 📝 版本信息

- **CKEditor 版本**: 20.0.0
- **格式刷插件版本**: 1.0.0 (自定义实现)
- **兼容性**: 完全兼容当前项目版本
- **构建状态**: ✅ 成功

## 🎉 完成！

您现在可以在编辑器中使用格式刷功能了！

刷新 `sample/index.html` 页面即可看到工具栏中的格式刷按钮。

如有任何问题或需要调整，请随时告知！

